<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
<link rel="stylesheet" href="/lib/third-part/css/ali.font.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Mysql存储引擎1. 查看存储引擎1查看mysql提供什么存储引擎：  显式如下：1show engines;  1show engines \G;  123456789101112131415161718192021222324252627*************************** 1. row ***************************Engine: InnoDBSu">
<meta property="og:type" content="article">
<meta property="og:title" content="Mysql存储引擎">
<meta property="og:url" content="http://example.com/2018/12/15/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/index.html">
<meta property="og:site_name" content="技术日记簿">
<meta property="og:description" content="Mysql存储引擎1. 查看存储引擎1查看mysql提供什么存储引擎：  显式如下：1show engines;  1show engines \G;  123456789101112131415161718192021222324252627*************************** 1. row ***************************Engine: InnoDBSu">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-12-15T10:10:23.000Z">
<meta property="article:modified_time" content="2023-06-14T10:52:27.353Z">
<meta property="article:author" content="wenchao">
<meta property="article:tag" content="Mysql">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/2018/12/15/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Mysql存储引擎 | 技术日记簿</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="技术日记簿" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">技术日记簿</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/wangwenchao1991" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2018/12/15/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/head.jpg">
      <meta itemprop="name" content="wenchao">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="技术日记簿">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Mysql存储引擎
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-12-15 18:10:23" itemprop="dateCreated datePublished" datetime="2018-12-15T18:10:23+08:00">2018-12-15</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-14 18:52:27" itemprop="dateModified" datetime="2023-06-14T18:52:27+08:00">2023-06-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Mysql存储引擎"><a href="#Mysql存储引擎" class="headerlink" title="Mysql存储引擎"></a>Mysql存储引擎</h1><h2 id="1-查看存储引擎"><a href="#1-查看存储引擎" class="headerlink" title="1. 查看存储引擎"></a>1. 查看存储引擎</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">查看mysql提供什么存储引擎：</span><br></pre></td></tr></table></figure>

<h4 id="显式如下："><a href="#显式如下：" class="headerlink" title="显式如下："></a>显式如下：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show engines;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show engines \G;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">*************************** 1. row ***************************</span><br><span class="line">Engine: InnoDB</span><br><span class="line">Support: DEFAULT</span><br><span class="line">Comment: Supports transactions, row-level locking, and foreign keys</span><br><span class="line">Transactions: YES</span><br><span class="line">XA: YES</span><br><span class="line">Savepoints: YES</span><br><span class="line">*************************** 2. row ***************************</span><br><span class="line">Engine: MRG_MYISAM</span><br><span class="line">Support: YES</span><br><span class="line">Comment: Collection of identical MyISAM tables</span><br><span class="line">Transactions: NO</span><br><span class="line">XA: NO</span><br><span class="line">Savepoints: NO</span><br><span class="line">*************************** 3. row ***************************</span><br><span class="line">Engine: MEMORY</span><br><span class="line">Support: YES</span><br><span class="line">Comment: Hash based, stored in memory, useful for temporary tables</span><br><span class="line">Transactions: NO</span><br><span class="line">XA: NO</span><br><span class="line">Savepoints: NO</span><br><span class="line">*************************** 4. row ***************************</span><br><span class="line">Engine: BLACKHOLE</span><br><span class="line">Support: YES</span><br><span class="line">Comment: /dev/null storage engine (anything you write to it disappears)</span><br><span class="line">Transactions: NO</span><br><span class="line">XA: NO</span><br></pre></td></tr></table></figure>

<h2 id="2-设置系统默认的存储引擎"><a href="#2-设置系统默认的存储引擎" class="headerlink" title="2. 设置系统默认的存储引擎"></a>2. 设置系统默认的存储引擎</h2><h4 id="查看默认的存储引擎："><a href="#查看默认的存储引擎：" class="headerlink" title="查看默认的存储引擎："></a>查看默认的存储引擎：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">Savepoints: NO</span><br><span class="line">*************************** 5. row ***************************</span><br><span class="line">Engine: MyISAM</span><br><span class="line">Support: YES</span><br><span class="line">Comment: MyISAM storage engine</span><br><span class="line">Transactions: NO</span><br><span class="line">XA: NO</span><br><span class="line">Savepoints: NO</span><br><span class="line">*************************** 6. row ***************************</span><br><span class="line">Engine: CSV</span><br><span class="line">Support: YES</span><br><span class="line">Comment: CSV storage engine</span><br><span class="line">Transactions: NO</span><br><span class="line">XA: NO</span><br><span class="line">Savepoints: NO</span><br><span class="line">*************************** 7. row ***************************</span><br><span class="line">Engine: ARCHIVE</span><br><span class="line">Support: YES</span><br><span class="line">Comment: Archive storage engine</span><br><span class="line">Transactions: NO</span><br><span class="line">XA: NO</span><br><span class="line">Savepoints: NO</span><br><span class="line">*************************** 8. row ***************************</span><br><span class="line">Engine: PERFORMANCE_SCHEMA</span><br><span class="line">Support: YES</span><br><span class="line">Comment: Performance Schema</span><br><span class="line">Transactions: NO</span><br><span class="line">XA: NO</span><br><span class="line">Savepoints: NO</span><br><span class="line">*************************** 9. row ***************************</span><br><span class="line">Engine: FEDERATED</span><br><span class="line">Support: NO</span><br><span class="line">Comment: Federated MySQL storage engine</span><br><span class="line">Transactions: NULL</span><br><span class="line">XA: NULL</span><br><span class="line">Savepoints: NULL</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">show variables like &#x27;%storage_engine%&#x27;;</span><br><span class="line">#或</span><br><span class="line">SELECT @@default_storage_engine;</span><br></pre></td></tr></table></figure>

<h4 id="修改默认的存储引擎"><a href="#修改默认的存储引擎" class="headerlink" title="修改默认的存储引擎"></a>修改默认的存储引擎</h4><p>如果在创建表的语句中没有显式指定表的存储引擎的话，那就会默认使用InnoDB作为表的存储引擎。<br>如果我们想改变表的默认存储引擎的话，可以这样写启动服务器的命令行：</p>
<p>或者修改my.cnf文件：</p>
<h2 id="3-设置表的存储引擎"><a href="#3-设置表的存储引擎" class="headerlink" title="3. 设置表的存储引擎"></a>3. 设置表的存储引擎</h2><h4 id="存储引擎是负责对表中的数据进行提取和写入工作的，我们可以为不同的表设置不同的存储引擎，也就是"><a href="#存储引擎是负责对表中的数据进行提取和写入工作的，我们可以为不同的表设置不同的存储引擎，也就是" class="headerlink" title="存储引擎是负责对表中的数据进行提取和写入工作的，我们可以为不同的表设置不同的存储引擎，也就是"></a>存储引擎是负责对表中的数据进行提取和写入工作的，我们可以为不同的表设置不同的存储引擎，也就是</h4><h4 id="说不同的表可以有不同的物理存储结构，不同的提取和写入方式。"><a href="#说不同的表可以有不同的物理存储结构，不同的提取和写入方式。" class="headerlink" title="说不同的表可以有不同的物理存储结构，不同的提取和写入方式。"></a>说不同的表可以有不同的物理存储结构，不同的提取和写入方式。</h4><h3 id="3-1-创建表时指定存储引擎"><a href="#3-1-创建表时指定存储引擎" class="headerlink" title="3. 1 创建表时指定存储引擎"></a>3. 1 创建表时指定存储引擎</h3><p>我们之前创建表的语句都没有指定表的存储引擎，那就会使用默认的存储引擎InnoDB。如果我们想显<br>式的指定一下表的存储引擎，那可以这么写：</p>
<h3 id="3-2-修改表的存储引擎"><a href="#3-2-修改表的存储引擎" class="headerlink" title="3. 2 修改表的存储引擎"></a>3. 2 修改表的存储引擎</h3><h4 id="如果表已经建好了，我们也可以使用下边这个语句来修改表的存储引擎："><a href="#如果表已经建好了，我们也可以使用下边这个语句来修改表的存储引擎：" class="headerlink" title="如果表已经建好了，我们也可以使用下边这个语句来修改表的存储引擎："></a>如果表已经建好了，我们也可以使用下边这个语句来修改表的存储引擎：</h4><p>比如我们修改一下engine_demo_table表的存储引擎：</p>
<p>这时我们再查看一下engine_demo_table的表结构：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SET DEFAULT_STORAGE_ENGINE=MyISAM;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">default-storage-engine=MyISAM</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 重启服务</span><br><span class="line">systemctl restart mysqld.service</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE 表名(</span><br><span class="line">建表语句;</span><br><span class="line">) ENGINE = 存储引擎名称;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 ENGINE = 存储引擎名称;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE engine_demo_table ENGINE = InnoDB;</span><br><span class="line">Query OK, 0 rows affected (0.05 sec)</span><br><span class="line">Records: 0 Duplicates: 0 Warnings: 0</span><br></pre></td></tr></table></figure>

<h2 id="4-引擎介绍"><a href="#4-引擎介绍" class="headerlink" title="4. 引擎介绍"></a>4. 引擎介绍</h2><h3 id="4-1-InnoDB-引擎：具备外键支持功能的事务存储引擎"><a href="#4-1-InnoDB-引擎：具备外键支持功能的事务存储引擎" class="headerlink" title="4. 1 InnoDB 引擎：具备外键支持功能的事务存储引擎"></a>4. 1 InnoDB 引擎：具备外键支持功能的事务存储引擎</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">MySQL从3.23.34a开始就包含InnoDB存储引擎。大于等于5.5之后，默认采用InnoDB引擎。</span><br><span class="line">InnoDB是MySQL的默认事务型引擎，它被设计用来处理大量的短期(short-lived)事务。可以确保事务</span><br><span class="line">的完整提交(Commit)和回滚(Rollback)。</span><br><span class="line">除了增加和查询外，还需要更新、删除操作，那么，应优先选择InnoDB存储引擎。</span><br><span class="line">除非有非常特别的原因需要使用其他的存储引擎，否则应该优先考虑InnoDB引擎。</span><br><span class="line">数据文件结构：（在《第 02 章_MySQL数据目录》章节已讲）</span><br><span class="line">表名.frm 存储表结构（MySQL8.0时，合并在表名.ibd中）</span><br><span class="line">表名.ibd 存储数据和索引</span><br><span class="line">InnoDB是为处理巨大数据量的最大性能设计。</span><br><span class="line">在以前的版本中，字典数据以元数据文件、非事务表等来存储。现在这些元数据文件被删除</span><br><span class="line">了。比如：.frm， .par，.trn， .isl，.db.opt等都在MySQL8.0中不存在了。</span><br><span class="line">对比MyISAM的存储引擎，InnoDB写的处理效率差一些，并且会占用更多的磁盘空间以保存数据和</span><br><span class="line">索引。</span><br><span class="line">MyISAM只缓存索引，不缓存真实数据；InnoDB不仅缓存索引还要缓存真实数据，对内存要求较</span><br><span class="line">高，而且内存大小对性能有决定性的影响。</span><br></pre></td></tr></table></figure>

<h3 id="4-2-MyISAM-引擎：主要的非事务处理存储引擎"><a href="#4-2-MyISAM-引擎：主要的非事务处理存储引擎" class="headerlink" title="4. 2 MyISAM 引擎：主要的非事务处理存储引擎"></a>4. 2 MyISAM 引擎：主要的非事务处理存储引擎</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">MyISAM提供了大量的特性，包括全文索引、压缩、空间函数(GIS)等，但MyISAM不支持事务、行级</span><br><span class="line">锁、外键，有一个毫无疑问的缺陷就是崩溃后无法安全恢复。</span><br><span class="line">5.5之前默认的存储引擎</span><br><span class="line">优势是访问的速度快，对事务完整性没有要求或者以SELECT、INSERT为主的应用</span><br><span class="line">针对数据统计有额外的常数存储。故而 count(*) 的查询效率很高</span><br><span class="line">数据文件结构：（在《第 02 章_MySQL数据目录》章节已讲）</span><br><span class="line">表名.frm 存储表结构</span><br><span class="line">表名.MYD 存储数据 (MYData)</span><br><span class="line">表名.MYI 存储索引 (MYIndex)</span><br><span class="line">应用场景：只读应用或者以读为主的业务</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW CREATE TABLE engine_demo_table\G</span><br><span class="line">*************************** 1. row ***************************</span><br><span class="line">Table: engine_demo_table</span><br><span class="line">Create Table: CREATE TABLE `engine_demo_table` (</span><br><span class="line">`i` int( 11 ) DEFAULT NULL</span><br><span class="line">) ENGINE=InnoDB DEFAULT CHARSET=utf</span><br><span class="line">1 row in set (0.01 sec)</span><br></pre></td></tr></table></figure>

<h3 id="4-3-Archive-引擎：用于数据存档"><a href="#4-3-Archive-引擎：用于数据存档" class="headerlink" title="4.3 Archive 引擎：用于数据存档"></a>4.3 Archive 引擎：用于数据存档</h3><h4 id="下表展示了ARCHIVE-存储引擎功能"><a href="#下表展示了ARCHIVE-存储引擎功能" class="headerlink" title="下表展示了ARCHIVE 存储引擎功能"></a>下表展示了ARCHIVE 存储引擎功能</h4><table>
<thead>
<tr>
<th>特征</th>
<th>支持</th>
</tr>
</thead>
<tbody><tr>
<td>B树索引</td>
<td>不支持</td>
</tr>
<tr>
<td>备份&#x2F;时间点恢复 （在服务器中实现，而不是在存储引擎中）</td>
<td>支持</td>
</tr>
<tr>
<td>集群数据库支持</td>
<td>不支持</td>
</tr>
<tr>
<td>聚集索引</td>
<td>不支持</td>
</tr>
<tr>
<td>压缩数据</td>
<td>支持</td>
</tr>
<tr>
<td>数据缓存</td>
<td>不支持</td>
</tr>
<tr>
<td>加密数据（加密功能在服务器中实现）</td>
<td>支持</td>
</tr>
<tr>
<td>外键支持</td>
<td>不支持</td>
</tr>
<tr>
<td>全文检索索引</td>
<td>不支持</td>
</tr>
<tr>
<td>地理空间数据类型支持</td>
<td>支持</td>
</tr>
<tr>
<td>地理空间索引支持</td>
<td>不支持</td>
</tr>
<tr>
<td>哈希索引</td>
<td>不支持</td>
</tr>
<tr>
<td>索引缓存</td>
<td>不支持</td>
</tr>
<tr>
<td>锁粒度</td>
<td>行锁</td>
</tr>
<tr>
<td>MVCC</td>
<td>不支持</td>
</tr>
<tr>
<td>存储限制</td>
<td>没有任何限制</td>
</tr>
<tr>
<td>交易</td>
<td>不支持</td>
</tr>
<tr>
<td>更新数据字典的统计信息</td>
<td>支持</td>
</tr>
</tbody></table>
<h3 id="4-4-Blackhole-引擎：丢弃写操作，读操作会返回空内容"><a href="#4-4-Blackhole-引擎：丢弃写操作，读操作会返回空内容" class="headerlink" title="4.4 Blackhole 引擎：丢弃写操作，读操作会返回空内容"></a>4.4 Blackhole 引擎：丢弃写操作，读操作会返回空内容</h3><h3 id="4-5-CSV-引擎：存储数据时，以逗号分隔各个数据项"><a href="#4-5-CSV-引擎：存储数据时，以逗号分隔各个数据项" class="headerlink" title="4.5 CSV 引擎：存储数据时，以逗号分隔各个数据项"></a>4.5 CSV 引擎：存储数据时，以逗号分隔各个数据项</h3><h4 id="使用案例如下"><a href="#使用案例如下" class="headerlink" title="使用案例如下"></a>使用案例如下</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE test (i INT NOT NULL, c CHAR( 10 ) NOT NULL) ENGINE = CSV;</span><br><span class="line">Query OK, 0 rows affected (0.06 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO test VALUES( 1 ,&#x27;record one&#x27;),( 2 ,&#x27;record two&#x27;);</span><br><span class="line">Query OK, 2 rows affected (0.05 sec)</span><br><span class="line">Records: 2 Duplicates: 0 Warnings: 0</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * FROM test;</span><br><span class="line">+---+------------+</span><br><span class="line">| i | c |</span><br><span class="line">+---+------------+</span><br></pre></td></tr></table></figure>

<h4 id="创建CSV表还会创建相应的元文件，用于存储表的状态和表中存在的行数。此文件的名称与表的名称相"><a href="#创建CSV表还会创建相应的元文件，用于存储表的状态和表中存在的行数。此文件的名称与表的名称相" class="headerlink" title="创建CSV表还会创建相应的元文件，用于存储表的状态和表中存在的行数。此文件的名称与表的名称相"></a>创建CSV表还会创建相应的元文件，用于存储表的状态和表中存在的行数。此文件的名称与表的名称相</h4><h4 id="同，后缀为CSM。如图所示"><a href="#同，后缀为CSM。如图所示" class="headerlink" title="同，后缀为CSM。如图所示"></a>同，后缀为CSM。如图所示</h4><p>如果检查test.CSV通过执行上述语句创建的数据库目录中的文件，其内容使用Notepad++打开如下：</p>
<p>这种格式可以被 Microsoft Excel 等电子表格应用程序读取，甚至写入。使用Microsoft Excel打开如图所示</p>
<h3 id="4-6-Memory-引擎：置于内存的表"><a href="#4-6-Memory-引擎：置于内存的表" class="headerlink" title="4.6 Memory 引擎：置于内存的表"></a>4.6 Memory 引擎：置于内存的表</h3><h4 id="概述："><a href="#概述：" class="headerlink" title="概述："></a>概述：</h4><p>Memory采用的逻辑介质是内存，响应速度很快，但是当mysqld守护进程崩溃的时候数据会丢失。另<br>外，要求存储的数据是数据长度不变的格式，比如，Blob和Text类型的数据不可用(长度不固定的)。</p>
<p><strong>主要特征：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Memory同时支持哈希（HASH）索引和B+树索引。</span><br><span class="line">Memory表至少比MyISAM表要快一个数量级。</span><br><span class="line">MEMORY表的大小是受到限制的。表的大小主要取决于两个参数，分别是max_rows和</span><br><span class="line">max_heap_table_size。其中，max_rows可以在创建表时指定；max_heap_table_size的大小默</span><br><span class="line">认为16MB，可以按需要进行扩大。</span><br><span class="line">数据文件与索引文件分开存储。</span><br><span class="line">缺点：其数据易丢失，生命周期短。基于这个缺陷，选择MEMORY存储引擎时需要特别小心。</span><br></pre></td></tr></table></figure>

<p><strong>使用Memory存储引擎的场景：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. 目标数据比较小，而且非常频繁的进行访问，在内存中存放数据，如果太大的数据会造成内存溢</span><br><span class="line">出。可以通过参数max_heap_table_size控制Memory表的大小，限制Memory表的最大的大</span><br><span class="line">小。</span><br><span class="line">2. 如果数据是临时的，而且必须立即可用得到，那么就可以放在内存中。</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">| 1 | record one |</span><br><span class="line">| 2 | record two |</span><br><span class="line">+---+------------+</span><br><span class="line">2 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;1&quot;,&quot;record one&quot;</span><br><span class="line">&quot;2&quot;,&quot;record two&quot;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">3. 存储在Memory表中的数据如果突然间丢失的话也没有太大的关系。</span><br></pre></td></tr></table></figure>

<h3 id="4-7-Federated-引擎：访问远程表"><a href="#4-7-Federated-引擎：访问远程表" class="headerlink" title="4.7 Federated 引擎：访问远程表"></a>4.7 Federated 引擎：访问远程表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Federated引擎是访问其他MySQL服务器的一个代理，尽管该引擎看起来提供了一种很好的跨服务</span><br><span class="line">器的灵活性，但也经常带来问题，因此默认是禁用的。</span><br></pre></td></tr></table></figure>

<h3 id="4-8-Merge引擎：管理多个MyISAM表构成的表集合"><a href="#4-8-Merge引擎：管理多个MyISAM表构成的表集合" class="headerlink" title="4.8 Merge引擎：管理多个MyISAM表构成的表集合"></a>4.8 Merge引擎：管理多个MyISAM表构成的表集合</h3><h3 id="4-9-NDB引擎：MySQL集群专用存储引擎"><a href="#4-9-NDB引擎：MySQL集群专用存储引擎" class="headerlink" title="4.9 NDB引擎：MySQL集群专用存储引擎"></a>4.9 NDB引擎：MySQL集群专用存储引擎</h3><p>也叫做 NDB Cluster 存储引擎，主要用于 MySQL Cluster 分布式集群环境，类似于 Oracle 的 RAC 集<br>群。</p>
<h3 id="4-10-引擎对比"><a href="#4-10-引擎对比" class="headerlink" title="4.10 引擎对比"></a>4.10 引擎对比</h3><p>MySQL中同一个数据库，不同的表可以选择不同的存储引擎。如下表对常用存储引擎做出了对比。</p>
<h4 id><a href="#" class="headerlink" title></a></h4><table>
<thead>
<tr>
<th>特点</th>
<th>MyISAM</th>
<th>InnoDB</th>
<th>MEMORY</th>
<th>MERGE</th>
<th>NDB</th>
</tr>
</thead>
<tbody><tr>
<td>存储限制</td>
<td>有</td>
<td>64TB</td>
<td>有</td>
<td>没有</td>
<td>有</td>
</tr>
<tr>
<td>事务安全</td>
<td></td>
<td>支持</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>锁机制</td>
<td>表锁，即使操作一条</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>记录也会锁住整个</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>表，不适合高并发的</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>操作</td>
<td>行锁，操作时只锁某一行，不对其它行有影响，适合高并发</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>的操作</td>
<td>表锁</td>
<td>表锁</td>
<td>行锁</td>
<td></td>
<td></td>
</tr>
<tr>
<td>B树索引</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
</tr>
<tr>
<td>哈希索引</td>
<td></td>
<td></td>
<td>支持</td>
<td></td>
<td>支持</td>
</tr>
<tr>
<td>全文索引</td>
<td>支持</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>集群索引</td>
<td></td>
<td>支持</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>数据缓存</td>
<td></td>
<td>支持</td>
<td>支持</td>
<td></td>
<td>支持</td>
</tr>
<tr>
<td>索引缓存</td>
<td>只缓存索引，不缓存</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>真实数据</td>
<td>不仅缓存索引还要缓存真实数据，对内存要求较高，而且内存大小对性能有决定性的影响</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td></td>
</tr>
<tr>
<td>数据可压缩</td>
<td>支持</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>空间使用</td>
<td>低</td>
<td>高</td>
<td>N&#x2F;A</td>
<td>低</td>
<td>低</td>
</tr>
<tr>
<td>内存使用</td>
<td>低</td>
<td>高</td>
<td>中等</td>
<td>低</td>
<td>高</td>
</tr>
<tr>
<td>批量插入的速度</td>
<td>高</td>
<td>低</td>
<td>高</td>
<td>高</td>
<td>高</td>
</tr>
<tr>
<td>支持外键</td>
<td></td>
<td>支持</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="5-MyISAM和InnoDB"><a href="#5-MyISAM和InnoDB" class="headerlink" title="5. MyISAM和InnoDB"></a>5. MyISAM和InnoDB</h2><p><strong>很多人对 InnoDB 和 MyISAM 的取舍存在疑问，到底选择哪个比较好呢？</strong></p>
<p>MySQL 5. 5 之前的默认存储引擎是MyISAM， 5. 5 之后改为了InnoDB。</p>
<table>
<thead>
<tr>
<th>对比项</th>
<th>MyISAM</th>
<th>InnoDB</th>
</tr>
</thead>
<tbody><tr>
<td>外键</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>事务</td>
<td>不支持</td>
<td>支持</td>
</tr>
<tr>
<td>行表锁</td>
<td>表锁，即使操作一条记录也会锁住整个表，不适合高并发的操作</td>
<td>行锁，操作时只锁某一行，不对其它行有影响，适合高并发的操作</td>
</tr>
<tr>
<td>缓存</td>
<td>只缓存索引，不缓存真实数据</td>
<td>不仅缓存索引还要缓存真实数据，对内存要求较高，而且内存大小对性能有决定性的影响</td>
</tr>
<tr>
<td>自带系统表使用</td>
<td>Y</td>
<td>N</td>
</tr>
<tr>
<td>关注点</td>
<td>性能：节省资源、消耗少、简单业务</td>
<td>事务：并发写、事务、更大资源</td>
</tr>
<tr>
<td>默认安装</td>
<td>Y</td>
<td>Y</td>
</tr>
<tr>
<td>默认使用</td>
<td>N</td>
<td></td>
</tr>
</tbody></table>
<h4 id="-1"><a href="#-1" class="headerlink" title></a></h4><h2 id="6-阿里巴巴、淘宝用哪个"><a href="#6-阿里巴巴、淘宝用哪个" class="headerlink" title="6. 阿里巴巴、淘宝用哪个"></a>6. 阿里巴巴、淘宝用哪个</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Percona 为 MySQL 数据库服务器进行了改进，在功能和性能上较 MySQL 有很显著的提升。</span><br><span class="line">该版本提升了在高负载情况下的 InnoDB 的性能、为 DBA 提供一些非常有用的性能诊断工具；另外</span><br><span class="line">有更多的参数和命令来控制服务器行为。</span><br><span class="line">该公司新建了一款存储引擎叫Xtradb完全可以替代Innodb，并且在性能和并发上做得更好</span><br><span class="line">阿里巴巴大部分mysql数据库其实使用的percona的原型加以修改。</span><br></pre></td></tr></table></figure>

<h2 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h2><h3 id="1-、InnoDB表的优势"><a href="#1-、InnoDB表的优势" class="headerlink" title="1 、InnoDB表的优势"></a>1 、InnoDB表的优势</h3><p>InnoDB存储引擎在实际应用中拥有诸多优势，比如操作便利、提高了数据库的性能、维护成本低等。如<br>果由于硬件或软件的原因导致服务器崩溃，那么在重启服务器之后不需要进行额外的操作。InnoDB崩溃<br>恢复功能自动将之前提交的内容定型，然后撤销没有提交的进程，重启之后继续从崩溃点开始执行。</p>
<p>InnoDB存储引擎在主内存中维护缓冲池，高频率使用的数据将在内存中直接被处理。这种缓存方式应用<br>于多种信息，加速了处理进程。</p>
<h4 id="在专用服务器上，物理内存中高达80-的部分被应用于缓冲池。如果需要将数据插入不同的表中，可以"><a href="#在专用服务器上，物理内存中高达80-的部分被应用于缓冲池。如果需要将数据插入不同的表中，可以" class="headerlink" title="在专用服务器上，物理内存中高达80%的部分被应用于缓冲池。如果需要将数据插入不同的表中，可以"></a>在专用服务器上，物理内存中高达80%的部分被应用于缓冲池。如果需要将数据插入不同的表中，可以</h4><h4 id="设置外键加强数据的完整性。更新或者删除数据，关联数据将会被自动更新或删除。如果试图将数据插"><a href="#设置外键加强数据的完整性。更新或者删除数据，关联数据将会被自动更新或删除。如果试图将数据插" class="headerlink" title="设置外键加强数据的完整性。更新或者删除数据，关联数据将会被自动更新或删除。如果试图将数据插"></a>设置外键加强数据的完整性。更新或者删除数据，关联数据将会被自动更新或删除。如果试图将数据插</h4><h4 id="入从表，但在主表中没有对应的数据，插入的数据将被自动移除。如果磁盘或内存中的数据出现崩溃，"><a href="#入从表，但在主表中没有对应的数据，插入的数据将被自动移除。如果磁盘或内存中的数据出现崩溃，" class="headerlink" title="入从表，但在主表中没有对应的数据，插入的数据将被自动移除。如果磁盘或内存中的数据出现崩溃，"></a>入从表，但在主表中没有对应的数据，插入的数据将被自动移除。如果磁盘或内存中的数据出现崩溃，</h4><h4 id="在使用脏数据之前，校验和机制会发出警告。当每个表的主键都设置合理时，与这些列有关的操作会被"><a href="#在使用脏数据之前，校验和机制会发出警告。当每个表的主键都设置合理时，与这些列有关的操作会被" class="headerlink" title="在使用脏数据之前，校验和机制会发出警告。当每个表的主键都设置合理时，与这些列有关的操作会被"></a>在使用脏数据之前，校验和机制会发出警告。当每个表的主键都设置合理时，与这些列有关的操作会被</h4><p>自动优化。插入、更新和删除操作通过做改变缓冲自动机制进行优化。InnoDB不仅支持当前读写，也会<br>缓冲改变的数据到数据流磁盘。</p>
<p>InnoDB的性能优势不只存在于长时运行查询的大型表。在同一列多次被查询时，自适应哈希索引会提高<br>查询的速度。使用InnoDB可以压缩表和相关的索引，可以在不影响性能和可用性的情况下创建或删除索<br>引。对于大型文本和BLOB数据，使用动态行形式，这种存储布局更高效。通过查询<br>INFORMATION_SCHEMA库中的表可以监控存储引擎的内部工作。在同一个语句中，InnoDB表可以与其他<br>存储引擎表混用。即使有些操作系统限制文件大小为2GB，InnoDB仍然可以处理。当处理大数据量时，<br>InnoDB兼顾CPU，以达到最大性能。</p>
<h3 id="2-、InnoDB和ACID模型"><a href="#2-、InnoDB和ACID模型" class="headerlink" title="2 、InnoDB和ACID模型"></a>2 、InnoDB和ACID模型</h3><h4 id="ACID模型是一系列数据库设计规则，这些规则着重强调可靠性，而可靠性对于商业数据和任务关键型应"><a href="#ACID模型是一系列数据库设计规则，这些规则着重强调可靠性，而可靠性对于商业数据和任务关键型应" class="headerlink" title="ACID模型是一系列数据库设计规则，这些规则着重强调可靠性，而可靠性对于商业数据和任务关键型应"></a>ACID模型是一系列数据库设计规则，这些规则着重强调可靠性，而可靠性对于商业数据和任务关键型应</h4><p>用非常重要。MySQL包含类似InnoDB存储引擎的组件，与ACID模型紧密相连，这样出现意外时，数据不<br>会崩溃，结果不会失真。如果依赖ACID模型，可以不使用一致性检查和崩溃恢复机制。如果拥有额外的<br>软件保护，极可靠的硬件或者应用可以容忍一小部分的数据丢失和不一致，可以将MySQL设置调整为只<br>依赖部分ACID特性，以达到更高的性能。下面讲解InnoDB存储引擎与ACID模型相同作用的四个方面。</p>
<p><strong>1. 原子方面</strong> ACID的原子方面主要涉及InnoDB事务，与MySQL相关的特性主要包括：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">自动提交设置。</span><br><span class="line">COMMIT语句。</span><br><span class="line">ROLLBACK语句。</span><br><span class="line">操作INFORMATION_SCHEMA库中的表数据。</span><br></pre></td></tr></table></figure>

<p><strong>2. 一致性方面</strong> ACID模型的一致性主要涉及保护数据不崩溃的内部InnoDB处理过程，与MySQL相关的特性<br>主要包括：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">InnoDB双写缓存。</span><br><span class="line">InnoDB崩溃恢复。</span><br></pre></td></tr></table></figure>

<p><strong>3. 隔离方面</strong> 隔离是应用于事务的级别，与MySQL相关的特性主要包括：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">自动提交设置。</span><br><span class="line">SET ISOLATION LEVEL语句。</span><br><span class="line">InnoDB锁的低级别信息。</span><br></pre></td></tr></table></figure>

<p><strong>4. 耐久性方面</strong> ACID模型的耐久性主要涉及与硬件配置相互影响的MySQL软件特性。由于硬件复杂多样<br>化，耐久性方面没有具体的规则可循。与MySQL相关的特性有：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">InnoDB双写缓存，通过innodb_doublewrite配置项配置。</span><br><span class="line">配置项innodb_flush_log_at_trx_commit。</span><br><span class="line">配置项sync_binlog。</span><br><span class="line">配置项innodb_file_per_table。</span><br><span class="line">存储设备的写入缓存。</span><br><span class="line">存储设备的备用电池缓存。</span><br><span class="line">运行MySQL的操作系统。</span><br><span class="line">持续的电力供应。</span><br><span class="line">备份策略。</span><br><span class="line">对分布式或托管的应用，最主要的在于硬件设备的地点以及网络情况。</span><br></pre></td></tr></table></figure>

<h3 id="3-、InnoDB架构"><a href="#3-、InnoDB架构" class="headerlink" title="3 、InnoDB架构"></a>3 、InnoDB架构</h3><h4 id="1-缓冲池-缓冲池是主内存中的一部分空间，用来缓存已使用的表和索引数据。缓冲池使得经常被使用的"><a href="#1-缓冲池-缓冲池是主内存中的一部分空间，用来缓存已使用的表和索引数据。缓冲池使得经常被使用的" class="headerlink" title="1. 缓冲池 缓冲池是主内存中的一部分空间，用来缓存已使用的表和索引数据。缓冲池使得经常被使用的"></a>1. 缓冲池 缓冲池是主内存中的一部分空间，用来缓存已使用的表和索引数据。缓冲池使得经常被使用的</h4><h4 id="数据能够直接在内存中获得，从而提高速度。"><a href="#数据能够直接在内存中获得，从而提高速度。" class="headerlink" title="数据能够直接在内存中获得，从而提高速度。"></a>数据能够直接在内存中获得，从而提高速度。</h4><h4 id="2-更改缓存-更改缓存是一个特殊的数据结构，当受影响的索引页不在缓存中时，更改缓存会缓存辅助索"><a href="#2-更改缓存-更改缓存是一个特殊的数据结构，当受影响的索引页不在缓存中时，更改缓存会缓存辅助索" class="headerlink" title="2. 更改缓存 更改缓存是一个特殊的数据结构，当受影响的索引页不在缓存中时，更改缓存会缓存辅助索"></a>2. 更改缓存 更改缓存是一个特殊的数据结构，当受影响的索引页不在缓存中时，更改缓存会缓存辅助索</h4><h4 id="引页的更改。索引页被其他读取操作时会加载到缓存池，缓存的更改内容就会被合并。不同于集群索"><a href="#引页的更改。索引页被其他读取操作时会加载到缓存池，缓存的更改内容就会被合并。不同于集群索" class="headerlink" title="引页的更改。索引页被其他读取操作时会加载到缓存池，缓存的更改内容就会被合并。不同于集群索"></a>引页的更改。索引页被其他读取操作时会加载到缓存池，缓存的更改内容就会被合并。不同于集群索</h4><h4 id="引，辅助索引并非独一无二的。当系统大部分闲置时，清除操作会定期运行，将更新的索引页刷入磁"><a href="#引，辅助索引并非独一无二的。当系统大部分闲置时，清除操作会定期运行，将更新的索引页刷入磁" class="headerlink" title="引，辅助索引并非独一无二的。当系统大部分闲置时，清除操作会定期运行，将更新的索引页刷入磁"></a>引，辅助索引并非独一无二的。当系统大部分闲置时，清除操作会定期运行，将更新的索引页刷入磁</h4><p>盘。更新缓存合并期间，可能会大大降低查询的性能。在内存中，更新缓存占用一部分InnoDB缓冲池。<br>在磁盘中，更新缓存是系统表空间的一部分。更新缓存的数据类型由innodb_change_buffering配置项管<br>理。</p>
<p><strong>3. 自适应哈希索引</strong> 自适应哈希索引将负载和足够的内存结合起来，使得InnoDB像内存数据库一样运行，<br>不需要降低事务上的性能或可靠性。这个特性通过innodb_adaptive_hash_index选项配置，或者通过–<br>skip-innodb_adaptive_hash_index命令行在服务启动时关闭。</p>
<p><strong>4. 重做日志缓存</strong> 重做日志缓存存放要放入重做日志的数据。重做日志缓存大小通过<br>innodb_log_buffer_size配置项配置。重做日志缓存会定期地将日志文件刷入磁盘。大型的重做日志缓存<br>使得大型事务能够正常运行而不需要写入磁盘。</p>
<p><strong>5. 系统表空间</strong> 系统表空间包括InnoDB数据字典、双写缓存、更新缓存和撤销日志，同时也包括表和索引<br>数据。多表共享，系统表空间被视为共享表空间。</p>
<p><strong>6. 双写缓存</strong> 双写缓存位于系统表空间中，用于写入从缓存池刷新的数据页。只有在刷新并写入双写缓存<br>后，InnoDB才会将数据页写入合适的位置。</p>
<p><strong>7. 撤销日志</strong> 撤销日志是一系列与事务相关的撤销记录的集合，包含如何撤销事务最近的更改。如果其他<br>事务要查询原始数据，可以从撤销日志记录中追溯未更改的数据。撤销日志存在于撤销日志片段中，这<br>些片段包含于回滚片段中。</p>
<p><strong>8. 每个表一个文件的表空间</strong> 每个表一个文件的表空间是指每个单独的表空间创建在自身的数据文件中，<br>而不是系统表空间中。这个功能通过innodb_file_per_table配置项开启。每个表空间由一个单独的.ibd数<br>据文件代表，该文件默认被创建在数据库目录中。</p>
<p><strong>9. 通用表空间</strong> 使用CREATE TABLESPACE语法创建共享的InnoDB表空间。通用表空间可以创建在MySQL数<br>据目录之外能够管理多个表并支持所有行格式的表。</p>
<p><strong>10. 撤销表空间</strong> 撤销表空间由一个或多个包含撤销日志的文件组成。撤销表空间的数量由<br>innodb_undo_tablespaces配置项配置。</p>
<p><strong>11. 临时表空间</strong> 用户创建的临时表空间和基于磁盘的内部临时表都创建于临时表空间。<br>innodb_temp_data_file_path配置项定义了相关的路径、名称、大小和属性。如果该值为空，默认会在<br>innodb_data_home_dir变量指定的目录下创建一个自动扩展的数据文件。</p>
<p><strong>12. 重做日志</strong> 重做日志是基于磁盘的数据结构，在崩溃恢复期间使用，用来纠正数据。正常操作期间，<br>重做日志会将请求数据进行编码，这些请求会改变InnoDB表数据。遇到意外崩溃后，未完成的更改会自<br>动在初始化期间重新进行。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Mysql/" rel="tag"># Mysql</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2018/12/08/%E6%95%B0%E6%8D%AE%E5%BA%93/Mysql%E9%80%BB%E8%BE%91%E6%9E%B6%E6%9E%84/" rel="prev" title="Mysql逻辑架构">
      <i class="fa fa-chevron-left"></i> Mysql逻辑架构
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/05/09/%E8%BF%90%E7%BB%B4/Linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/" rel="next" title="Linux常用命令">
      Linux常用命令 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Mysql%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="nav-number">1.</span> <span class="nav-text">Mysql存储引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E6%9F%A5%E7%9C%8B%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="nav-number">1.1.</span> <span class="nav-text">1. 查看存储引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%98%BE%E5%BC%8F%E5%A6%82%E4%B8%8B%EF%BC%9A"><span class="nav-number">1.1.0.1.</span> <span class="nav-text">显式如下：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E8%AE%BE%E7%BD%AE%E7%B3%BB%E7%BB%9F%E9%BB%98%E8%AE%A4%E7%9A%84%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="nav-number">1.2.</span> <span class="nav-text">2. 设置系统默认的存储引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E9%BB%98%E8%AE%A4%E7%9A%84%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%EF%BC%9A"><span class="nav-number">1.2.0.1.</span> <span class="nav-text">查看默认的存储引擎：</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E9%BB%98%E8%AE%A4%E7%9A%84%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="nav-number">1.2.0.2.</span> <span class="nav-text">修改默认的存储引擎</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E8%AE%BE%E7%BD%AE%E8%A1%A8%E7%9A%84%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="nav-number">1.3.</span> <span class="nav-text">3. 设置表的存储引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E6%98%AF%E8%B4%9F%E8%B4%A3%E5%AF%B9%E8%A1%A8%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E8%BF%9B%E8%A1%8C%E6%8F%90%E5%8F%96%E5%92%8C%E5%86%99%E5%85%A5%E5%B7%A5%E4%BD%9C%E7%9A%84%EF%BC%8C%E6%88%91%E4%BB%AC%E5%8F%AF%E4%BB%A5%E4%B8%BA%E4%B8%8D%E5%90%8C%E7%9A%84%E8%A1%A8%E8%AE%BE%E7%BD%AE%E4%B8%8D%E5%90%8C%E7%9A%84%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF"><span class="nav-number">1.3.0.1.</span> <span class="nav-text">存储引擎是负责对表中的数据进行提取和写入工作的，我们可以为不同的表设置不同的存储引擎，也就是</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%B4%E4%B8%8D%E5%90%8C%E7%9A%84%E8%A1%A8%E5%8F%AF%E4%BB%A5%E6%9C%89%E4%B8%8D%E5%90%8C%E7%9A%84%E7%89%A9%E7%90%86%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84%EF%BC%8C%E4%B8%8D%E5%90%8C%E7%9A%84%E6%8F%90%E5%8F%96%E5%92%8C%E5%86%99%E5%85%A5%E6%96%B9%E5%BC%8F%E3%80%82"><span class="nav-number">1.3.0.2.</span> <span class="nav-text">说不同的表可以有不同的物理存储结构，不同的提取和写入方式。</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%E5%88%9B%E5%BB%BA%E8%A1%A8%E6%97%B6%E6%8C%87%E5%AE%9A%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="nav-number">1.3.1.</span> <span class="nav-text">3. 1 创建表时指定存储引擎</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%9A%84%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="nav-number">1.3.2.</span> <span class="nav-text">3. 2 修改表的存储引擎</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%A6%82%E6%9E%9C%E8%A1%A8%E5%B7%B2%E7%BB%8F%E5%BB%BA%E5%A5%BD%E4%BA%86%EF%BC%8C%E6%88%91%E4%BB%AC%E4%B9%9F%E5%8F%AF%E4%BB%A5%E4%BD%BF%E7%94%A8%E4%B8%8B%E8%BE%B9%E8%BF%99%E4%B8%AA%E8%AF%AD%E5%8F%A5%E6%9D%A5%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%9A%84%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%EF%BC%9A"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">如果表已经建好了，我们也可以使用下边这个语句来修改表的存储引擎：</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E5%BC%95%E6%93%8E%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.4.</span> <span class="nav-text">4. 引擎介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-InnoDB-%E5%BC%95%E6%93%8E%EF%BC%9A%E5%85%B7%E5%A4%87%E5%A4%96%E9%94%AE%E6%94%AF%E6%8C%81%E5%8A%9F%E8%83%BD%E7%9A%84%E4%BA%8B%E5%8A%A1%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="nav-number">1.4.1.</span> <span class="nav-text">4. 1 InnoDB 引擎：具备外键支持功能的事务存储引擎</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-MyISAM-%E5%BC%95%E6%93%8E%EF%BC%9A%E4%B8%BB%E8%A6%81%E7%9A%84%E9%9D%9E%E4%BA%8B%E5%8A%A1%E5%A4%84%E7%90%86%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="nav-number">1.4.2.</span> <span class="nav-text">4. 2 MyISAM 引擎：主要的非事务处理存储引擎</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-Archive-%E5%BC%95%E6%93%8E%EF%BC%9A%E7%94%A8%E4%BA%8E%E6%95%B0%E6%8D%AE%E5%AD%98%E6%A1%A3"><span class="nav-number">1.4.3.</span> <span class="nav-text">4.3 Archive 引擎：用于数据存档</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8B%E8%A1%A8%E5%B1%95%E7%A4%BA%E4%BA%86ARCHIVE-%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E%E5%8A%9F%E8%83%BD"><span class="nav-number">1.4.3.1.</span> <span class="nav-text">下表展示了ARCHIVE 存储引擎功能</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-Blackhole-%E5%BC%95%E6%93%8E%EF%BC%9A%E4%B8%A2%E5%BC%83%E5%86%99%E6%93%8D%E4%BD%9C%EF%BC%8C%E8%AF%BB%E6%93%8D%E4%BD%9C%E4%BC%9A%E8%BF%94%E5%9B%9E%E7%A9%BA%E5%86%85%E5%AE%B9"><span class="nav-number">1.4.4.</span> <span class="nav-text">4.4 Blackhole 引擎：丢弃写操作，读操作会返回空内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-CSV-%E5%BC%95%E6%93%8E%EF%BC%9A%E5%AD%98%E5%82%A8%E6%95%B0%E6%8D%AE%E6%97%B6%EF%BC%8C%E4%BB%A5%E9%80%97%E5%8F%B7%E5%88%86%E9%9A%94%E5%90%84%E4%B8%AA%E6%95%B0%E6%8D%AE%E9%A1%B9"><span class="nav-number">1.4.5.</span> <span class="nav-text">4.5 CSV 引擎：存储数据时，以逗号分隔各个数据项</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%A1%88%E4%BE%8B%E5%A6%82%E4%B8%8B"><span class="nav-number">1.4.5.1.</span> <span class="nav-text">使用案例如下</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BACSV%E8%A1%A8%E8%BF%98%E4%BC%9A%E5%88%9B%E5%BB%BA%E7%9B%B8%E5%BA%94%E7%9A%84%E5%85%83%E6%96%87%E4%BB%B6%EF%BC%8C%E7%94%A8%E4%BA%8E%E5%AD%98%E5%82%A8%E8%A1%A8%E7%9A%84%E7%8A%B6%E6%80%81%E5%92%8C%E8%A1%A8%E4%B8%AD%E5%AD%98%E5%9C%A8%E7%9A%84%E8%A1%8C%E6%95%B0%E3%80%82%E6%AD%A4%E6%96%87%E4%BB%B6%E7%9A%84%E5%90%8D%E7%A7%B0%E4%B8%8E%E8%A1%A8%E7%9A%84%E5%90%8D%E7%A7%B0%E7%9B%B8"><span class="nav-number">1.4.5.2.</span> <span class="nav-text">创建CSV表还会创建相应的元文件，用于存储表的状态和表中存在的行数。此文件的名称与表的名称相</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%8C%EF%BC%8C%E5%90%8E%E7%BC%80%E4%B8%BACSM%E3%80%82%E5%A6%82%E5%9B%BE%E6%89%80%E7%A4%BA"><span class="nav-number">1.4.5.3.</span> <span class="nav-text">同，后缀为CSM。如图所示</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-6-Memory-%E5%BC%95%E6%93%8E%EF%BC%9A%E7%BD%AE%E4%BA%8E%E5%86%85%E5%AD%98%E7%9A%84%E8%A1%A8"><span class="nav-number">1.4.6.</span> <span class="nav-text">4.6 Memory 引擎：置于内存的表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A6%82%E8%BF%B0%EF%BC%9A"><span class="nav-number">1.4.6.1.</span> <span class="nav-text">概述：</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-7-Federated-%E5%BC%95%E6%93%8E%EF%BC%9A%E8%AE%BF%E9%97%AE%E8%BF%9C%E7%A8%8B%E8%A1%A8"><span class="nav-number">1.4.7.</span> <span class="nav-text">4.7 Federated 引擎：访问远程表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-8-Merge%E5%BC%95%E6%93%8E%EF%BC%9A%E7%AE%A1%E7%90%86%E5%A4%9A%E4%B8%AAMyISAM%E8%A1%A8%E6%9E%84%E6%88%90%E7%9A%84%E8%A1%A8%E9%9B%86%E5%90%88"><span class="nav-number">1.4.8.</span> <span class="nav-text">4.8 Merge引擎：管理多个MyISAM表构成的表集合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-9-NDB%E5%BC%95%E6%93%8E%EF%BC%9AMySQL%E9%9B%86%E7%BE%A4%E4%B8%93%E7%94%A8%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="nav-number">1.4.9.</span> <span class="nav-text">4.9 NDB引擎：MySQL集群专用存储引擎</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-10-%E5%BC%95%E6%93%8E%E5%AF%B9%E6%AF%94"><span class="nav-number">1.4.10.</span> <span class="nav-text">4.10 引擎对比</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-number">1.4.10.1.</span> <span class="nav-text"></span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-MyISAM%E5%92%8CInnoDB"><span class="nav-number">1.5.</span> <span class="nav-text">5. MyISAM和InnoDB</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#-1"><span class="nav-number">1.5.0.1.</span> <span class="nav-text"></span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4%E3%80%81%E6%B7%98%E5%AE%9D%E7%94%A8%E5%93%AA%E4%B8%AA"><span class="nav-number">1.6.</span> <span class="nav-text">6. 阿里巴巴、淘宝用哪个</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A1%A5%E5%85%85%EF%BC%9A"><span class="nav-number">1.7.</span> <span class="nav-text">补充：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E3%80%81InnoDB%E8%A1%A8%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="nav-number">1.7.1.</span> <span class="nav-text">1 、InnoDB表的优势</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E4%B8%93%E7%94%A8%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%8A%EF%BC%8C%E7%89%A9%E7%90%86%E5%86%85%E5%AD%98%E4%B8%AD%E9%AB%98%E8%BE%BE80-%E7%9A%84%E9%83%A8%E5%88%86%E8%A2%AB%E5%BA%94%E7%94%A8%E4%BA%8E%E7%BC%93%E5%86%B2%E6%B1%A0%E3%80%82%E5%A6%82%E6%9E%9C%E9%9C%80%E8%A6%81%E5%B0%86%E6%95%B0%E6%8D%AE%E6%8F%92%E5%85%A5%E4%B8%8D%E5%90%8C%E7%9A%84%E8%A1%A8%E4%B8%AD%EF%BC%8C%E5%8F%AF%E4%BB%A5"><span class="nav-number">1.7.1.1.</span> <span class="nav-text">在专用服务器上，物理内存中高达80%的部分被应用于缓冲池。如果需要将数据插入不同的表中，可以</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%A4%96%E9%94%AE%E5%8A%A0%E5%BC%BA%E6%95%B0%E6%8D%AE%E7%9A%84%E5%AE%8C%E6%95%B4%E6%80%A7%E3%80%82%E6%9B%B4%E6%96%B0%E6%88%96%E8%80%85%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%EF%BC%8C%E5%85%B3%E8%81%94%E6%95%B0%E6%8D%AE%E5%B0%86%E4%BC%9A%E8%A2%AB%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0%E6%88%96%E5%88%A0%E9%99%A4%E3%80%82%E5%A6%82%E6%9E%9C%E8%AF%95%E5%9B%BE%E5%B0%86%E6%95%B0%E6%8D%AE%E6%8F%92"><span class="nav-number">1.7.1.2.</span> <span class="nav-text">设置外键加强数据的完整性。更新或者删除数据，关联数据将会被自动更新或删除。如果试图将数据插</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%A5%E4%BB%8E%E8%A1%A8%EF%BC%8C%E4%BD%86%E5%9C%A8%E4%B8%BB%E8%A1%A8%E4%B8%AD%E6%B2%A1%E6%9C%89%E5%AF%B9%E5%BA%94%E7%9A%84%E6%95%B0%E6%8D%AE%EF%BC%8C%E6%8F%92%E5%85%A5%E7%9A%84%E6%95%B0%E6%8D%AE%E5%B0%86%E8%A2%AB%E8%87%AA%E5%8A%A8%E7%A7%BB%E9%99%A4%E3%80%82%E5%A6%82%E6%9E%9C%E7%A3%81%E7%9B%98%E6%88%96%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E6%95%B0%E6%8D%AE%E5%87%BA%E7%8E%B0%E5%B4%A9%E6%BA%83%EF%BC%8C"><span class="nav-number">1.7.1.3.</span> <span class="nav-text">入从表，但在主表中没有对应的数据，插入的数据将被自动移除。如果磁盘或内存中的数据出现崩溃，</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E4%BD%BF%E7%94%A8%E8%84%8F%E6%95%B0%E6%8D%AE%E4%B9%8B%E5%89%8D%EF%BC%8C%E6%A0%A1%E9%AA%8C%E5%92%8C%E6%9C%BA%E5%88%B6%E4%BC%9A%E5%8F%91%E5%87%BA%E8%AD%A6%E5%91%8A%E3%80%82%E5%BD%93%E6%AF%8F%E4%B8%AA%E8%A1%A8%E7%9A%84%E4%B8%BB%E9%94%AE%E9%83%BD%E8%AE%BE%E7%BD%AE%E5%90%88%E7%90%86%E6%97%B6%EF%BC%8C%E4%B8%8E%E8%BF%99%E4%BA%9B%E5%88%97%E6%9C%89%E5%85%B3%E7%9A%84%E6%93%8D%E4%BD%9C%E4%BC%9A%E8%A2%AB"><span class="nav-number">1.7.1.4.</span> <span class="nav-text">在使用脏数据之前，校验和机制会发出警告。当每个表的主键都设置合理时，与这些列有关的操作会被</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E3%80%81InnoDB%E5%92%8CACID%E6%A8%A1%E5%9E%8B"><span class="nav-number">1.7.2.</span> <span class="nav-text">2 、InnoDB和ACID模型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ACID%E6%A8%A1%E5%9E%8B%E6%98%AF%E4%B8%80%E7%B3%BB%E5%88%97%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E8%A7%84%E5%88%99%EF%BC%8C%E8%BF%99%E4%BA%9B%E8%A7%84%E5%88%99%E7%9D%80%E9%87%8D%E5%BC%BA%E8%B0%83%E5%8F%AF%E9%9D%A0%E6%80%A7%EF%BC%8C%E8%80%8C%E5%8F%AF%E9%9D%A0%E6%80%A7%E5%AF%B9%E4%BA%8E%E5%95%86%E4%B8%9A%E6%95%B0%E6%8D%AE%E5%92%8C%E4%BB%BB%E5%8A%A1%E5%85%B3%E9%94%AE%E5%9E%8B%E5%BA%94"><span class="nav-number">1.7.2.1.</span> <span class="nav-text">ACID模型是一系列数据库设计规则，这些规则着重强调可靠性，而可靠性对于商业数据和任务关键型应</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E3%80%81InnoDB%E6%9E%B6%E6%9E%84"><span class="nav-number">1.7.3.</span> <span class="nav-text">3 、InnoDB架构</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E7%BC%93%E5%86%B2%E6%B1%A0-%E7%BC%93%E5%86%B2%E6%B1%A0%E6%98%AF%E4%B8%BB%E5%86%85%E5%AD%98%E4%B8%AD%E7%9A%84%E4%B8%80%E9%83%A8%E5%88%86%E7%A9%BA%E9%97%B4%EF%BC%8C%E7%94%A8%E6%9D%A5%E7%BC%93%E5%AD%98%E5%B7%B2%E4%BD%BF%E7%94%A8%E7%9A%84%E8%A1%A8%E5%92%8C%E7%B4%A2%E5%BC%95%E6%95%B0%E6%8D%AE%E3%80%82%E7%BC%93%E5%86%B2%E6%B1%A0%E4%BD%BF%E5%BE%97%E7%BB%8F%E5%B8%B8%E8%A2%AB%E4%BD%BF%E7%94%A8%E7%9A%84"><span class="nav-number">1.7.3.1.</span> <span class="nav-text">1. 缓冲池 缓冲池是主内存中的一部分空间，用来缓存已使用的表和索引数据。缓冲池使得经常被使用的</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%83%BD%E5%A4%9F%E7%9B%B4%E6%8E%A5%E5%9C%A8%E5%86%85%E5%AD%98%E4%B8%AD%E8%8E%B7%E5%BE%97%EF%BC%8C%E4%BB%8E%E8%80%8C%E6%8F%90%E9%AB%98%E9%80%9F%E5%BA%A6%E3%80%82"><span class="nav-number">1.7.3.2.</span> <span class="nav-text">数据能够直接在内存中获得，从而提高速度。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E6%9B%B4%E6%94%B9%E7%BC%93%E5%AD%98-%E6%9B%B4%E6%94%B9%E7%BC%93%E5%AD%98%E6%98%AF%E4%B8%80%E4%B8%AA%E7%89%B9%E6%AE%8A%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%EF%BC%8C%E5%BD%93%E5%8F%97%E5%BD%B1%E5%93%8D%E7%9A%84%E7%B4%A2%E5%BC%95%E9%A1%B5%E4%B8%8D%E5%9C%A8%E7%BC%93%E5%AD%98%E4%B8%AD%E6%97%B6%EF%BC%8C%E6%9B%B4%E6%94%B9%E7%BC%93%E5%AD%98%E4%BC%9A%E7%BC%93%E5%AD%98%E8%BE%85%E5%8A%A9%E7%B4%A2"><span class="nav-number">1.7.3.3.</span> <span class="nav-text">2. 更改缓存 更改缓存是一个特殊的数据结构，当受影响的索引页不在缓存中时，更改缓存会缓存辅助索</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%95%E9%A1%B5%E7%9A%84%E6%9B%B4%E6%94%B9%E3%80%82%E7%B4%A2%E5%BC%95%E9%A1%B5%E8%A2%AB%E5%85%B6%E4%BB%96%E8%AF%BB%E5%8F%96%E6%93%8D%E4%BD%9C%E6%97%B6%E4%BC%9A%E5%8A%A0%E8%BD%BD%E5%88%B0%E7%BC%93%E5%AD%98%E6%B1%A0%EF%BC%8C%E7%BC%93%E5%AD%98%E7%9A%84%E6%9B%B4%E6%94%B9%E5%86%85%E5%AE%B9%E5%B0%B1%E4%BC%9A%E8%A2%AB%E5%90%88%E5%B9%B6%E3%80%82%E4%B8%8D%E5%90%8C%E4%BA%8E%E9%9B%86%E7%BE%A4%E7%B4%A2"><span class="nav-number">1.7.3.4.</span> <span class="nav-text">引页的更改。索引页被其他读取操作时会加载到缓存池，缓存的更改内容就会被合并。不同于集群索</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BC%95%EF%BC%8C%E8%BE%85%E5%8A%A9%E7%B4%A2%E5%BC%95%E5%B9%B6%E9%9D%9E%E7%8B%AC%E4%B8%80%E6%97%A0%E4%BA%8C%E7%9A%84%E3%80%82%E5%BD%93%E7%B3%BB%E7%BB%9F%E5%A4%A7%E9%83%A8%E5%88%86%E9%97%B2%E7%BD%AE%E6%97%B6%EF%BC%8C%E6%B8%85%E9%99%A4%E6%93%8D%E4%BD%9C%E4%BC%9A%E5%AE%9A%E6%9C%9F%E8%BF%90%E8%A1%8C%EF%BC%8C%E5%B0%86%E6%9B%B4%E6%96%B0%E7%9A%84%E7%B4%A2%E5%BC%95%E9%A1%B5%E5%88%B7%E5%85%A5%E7%A3%81"><span class="nav-number">1.7.3.5.</span> <span class="nav-text">引，辅助索引并非独一无二的。当系统大部分闲置时，清除操作会定期运行，将更新的索引页刷入磁</span></a></li></ol></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="wenchao"
      src="/images/head.jpg">
  <p class="site-author-name" itemprop="name">wenchao</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/wangwenchao1991" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;wangwenchao1991" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://space.bilibili.com/349205260" title="Bilibili → https:&#x2F;&#x2F;space.bilibili.com&#x2F;349205260" rel="noopener" target="_blank"><i class="iconfont icon-bilibili fa-fw"></i>Bilibili</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wenchao</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
